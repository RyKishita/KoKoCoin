# アイデア雑記

## 全般。不具合ではあるが致命的でないので見送ったものも含む

- エントランスで設定ボタンのパネルを出したまま画面回転をした場合に、元に戻すとメニューが残ったまま
  - デュエル中も同じはず。
  - 保留
- シャドーダガーのコインイメージが虫みたいに見える
- シーンのフェードアウトインはタイムラインを使っているが、UniTask/UniRxでよいのでは
  - DOTWeenだけでも出来る。逆にそうできなかった理由があるかも
  - タイムラインに乗せるがために、アセットの管理などをしているのが無駄では
  - 今動いているものは後で
- ダイアログが出ている間はBackキー入力を無効化したが、ダイアログを閉じる動作になって欲しい
  - 複数のダイアログが重なっている場合でも、表示順に応じて一つずつ戻せるように
- ルール編集で、スクロールがしづらい。タップ位置がコイン一覧などのスクロール可能な場所にある場合
  - [https://forum.unity.com/threads/nested-scrollrect.268551/]
    - ScrollRectを派生したクラスにする方法
  - 全体リストのスクロールになるのはいいが、各項目のスクロールは出来なくなるわけで、ボタンやスクロールバーに頼ることになる
    - 保留
- 開始時のUnityロゴ
  - 背景の色は若干変えた
  - [スプラッシュイメージ](https://docs.unity3d.com/Manual/class-PlayerSettingsSplashScreen.html)
    - 起動時のUnityロゴの並びにイメージを貼るのは、公式としてサポートされている
    - 黒だった背景も任意に変えられる
    - 後は自分のロゴ
      - 出す必要があるかどうか考える。詳細に著作権表記があれば十分では
        - いわゆるブランド。今後も他のアプリを作るかどうか
          - 昔作ったものだと7種類ある
      - 著作権表記をするだけにして、ロゴはやめた
- ルームで遊ぶ場合は、接続コードをルームに入る時点で設定したい。
  - LobbyScript.InitializeData に、接続コードのオーバーライド設定値を持たせる
  - ルームデータに接続コードを含める
    - 作成時に入力が必要になる。不要でも一手増える
      - 手軽さが減るので見送り
- コイントレード、オークション
  - 通貨に相当するものが必要になる。
    - 現状なら対戦ポイントか？
      - 将来は対戦ポイントは課金も含めたい。そうすると間接的に有料でコインが変えてしまうので不可
- 課金要素/報酬
  - 対戦に影響しない課金
    - アバター
    - フレンド対戦
  - ゲーム内アイテム販売の仕組みを知っておく。
  - まずは対戦ポイント
    - 有料コンテンツは住所を明らかにする必要があるようだ。法人化なり代理なりを調べる
- フレンド登録と対戦
  - オフラインで交換
  - いずれはコード入力
    - プレイヤー名は重複がありうる
  - ポイント消費と報酬
    - オンラインと同じなので消費はさせる
      - 消費はするが報酬なしなのはどうなのか
    - 有料項目にするなら対戦自体は無料にする？
  - フレンド対戦画面
    - ルームと同様にする。
    - 現在遊んでいるかどうか
  - 将来
    - チーム戦
- ルール編集画面 コインを選ぶ場所において、文字と説明だけだと探しづらいので、選択パネルを出す
  - 対象
    - コイン別の最大コイン枚数
    - 強制的に追加されるコイン（管理者用）
    - 未所持でも使用可能なコイン（管理者用）
  - UIをプレファブ化
  - デッキ編集と同じフィルタ
    - あったほうがいいけど、ルール編集なのでほとんど使われない
- エントランス
  - レベル→デュエル種類ではなく、逆にする
    - NPC対戦を選んでから難易度を選ぶなど
      - 報酬に変化が無いと選びづらそう
    - イベント対戦にはレベルがない。レベル選択から独立した専用ボタンがあってもいいかも
      - ルームも同じ。なので以下になる
  - オンラインの場合だけログインする
  - 今より何が良くなるかがはっきりできなかったので保留
- デュエル終了時にエントランスに戻るが、ロビーに戻せるならそうする
  - オンライン対戦だとポイント不足がある
  - ロビーに入るには LobbyScript.InitializeData がいる。その他専用の初期化処理もいるので後にする
- 接続要求を出した時点で、その相手と接続している。その為に複数の接続要求を受け取れない。
  - 対戦開始前の情報交換をすべてブロードキャストにする。
  - ブロードキャスト出来ない接続方法は現状のまま。
  - 受け取れたとしても、その中から選ぶにはUI変更が必要
    - オフライン対戦での話であり需要は低そうなので保留
- 人気コインのフィルタ
  - コイン使用率情報をサーバーから取得
    - プレイヤーデータ集計
      - Achievement
        - 総プレイ時間
        - 総ダメージ
        - 総経過ターン
        - 総歩行数
        - コイン毎
          - デッキ採用回数
          - デュエル中に使用された回数
          - コイン引換券使用数（オフライン）
      - コイン引換券使用数（オンライン）
- 自作デュエルルールを共有しやすくする
  - ツイート出来るようにする。またツイートから取り込めるようにする
  - QRコードを出す
    - QRコードをクリップボードに入れる
    - ゲーム内からQRコード読み込みを出す
- ルールの集計
  - 周回用ルールや一方的な勝負になるルールを検出
  - デュエルの平均時間
  - デュエル数
  - 「いいね」評価
    - ロビーでのフィルタ「評価が低いルールの除外」
- ある効果を持っているコインの検索
  - Effectのクラス毎に一覧を出して、それを持っているコインと一致
  - 文字列一致である程度はカバーできる。
  - 意味の検索をするにはそれなりに準備が必要
- オンライン対戦でホストゲストを区別しないようにしたい
  - 開始はボタン一つ
  - ホストゲスト間でマッチングするようにしたが、区別をなくすなら無くすで統一しないとマッチングしない
  - 案
    - 全員ホストにする。対戦要求を出した方がゲスト
    - マッチングしてから、ホストになった側がネットワークIDを得る。
      - マッチメイキングでは、ホストという情報はないようだ
    - マッチングしたら、PlayFabIDが一番小さい人がネットワークを作る
      - 他のプレイヤーは、ユーザーデータにネットワークIDが入るまで定期的に見る。入ったら始めて一覧に出す
        - 負荷はどうなのか。
  - 先攻プレイヤーに関するルールをどうするか
    - イベントで特定のプレイヤーを先攻に固定したい場合もある
    - ロビーの時点でルールが確定するようになったので、それを見てボタンを増やす
  - LANも検討
  - 標準ルールでもPINを設定したいなら必要？
    - オンラインでしか設定出来ない。意味もホストとゲストで同じなので統合出来そう
  - オフライン対戦だとペアリングがあるので、LANぐらいしかうまく実装出来ない
- ロビー、オフライン対戦で、項目の表示数上限
  - 後で見つかったものが出てこず内容が固定されてしまうかもなので、新しい項目が上書きされるなど
  - ホスト/ゲストがあるので、そこまで多くはならない
- チャンネルの名前とチャンネルの予約
  - 主にユーザーイベント
  - 任意名称は管理者機能。ユーザーは固定名から選択
  - 実際の処理は指定された期限の間だけチャンネル名を表示するのみ
  - 合議制
    - 3人以上が同じチャンネルでロビーに入り、3人以上が同じチャンネル名を登録した場合だけ有効にする
  - 予約はある程度遊んだユーザーだけ
    - 予約を占有し続ける妨害が出来なくはない
- ネイティブ広告の検討
  - [https://developers.google.com/admob/unity/native]
  - バナーは画面端の固定領域に配置されるが、ネイティブは任意の位置に出すもの
  - 案としては、エントランスでNPC/オフライン/オンラインの絵が配置されない場合の代わり
  - 保留
    - [https://github.com/googleads/googleads-mobile-unity/issues/2286]
      - ネイティブ広告プラグインを入れると権限を追加するとのこと
      - 修正したとあるが、7.2から変わらず
- ホスト側は NetworkID を取得してからマッチングのチケットを作るが、マッチング相手を得てから作る方が良いのでは
  - NetworkIDの取得コストが高い気がするので
  - 一方でマッチングする以上必ず作るものである。
  - 仮に後から作る場合、ゲスト側は作成するまで待つことになる。加えて毎回ユーザーデータを取得する
  - 総合的なコストは今のままが軽いと思われる。後はユーザー体験上でどちらがいいか
- ルールGuidがコピーされてイベントデュエル扱いされないようにする
  - イベントを自分のルールとして取り込みをした場合はIDが変わるのでOK
  - StartDuel,FinishDuelにタイプも渡す？
  - イベントではないのに報酬が貰えるだけだし、イベントは定期的に変わる。実害が少ないので見送り
- 実績
  - 与えたダメージの、ダメージ種類。
  - 受けたダメージ。ダメージ種類。ユーザー公開はしない
  - コインサイズ別とかコイン別とか、細かい事を言うと沢山あるので見送り
- イベントルールの今後の予定表示
  - 今あるルールに集中できなくなるので見送り
- ゲーム内の掲示板
  - 自由入力は一切排除している。その為、コミュニケーション方法は良く考える
    - 例えば、良い悪いだけは表明できて、コイン毎に評価するだけ
    - あるコインの組み合わせが強すぎるなら、コインセットに対して悪い評価を入れるなど
    - コインの評価に加えて、パラメータに対する評価
      - ダメージに悪い評価を付けるとか、直接攻撃の射程に付けるとか
  - ある一定の間遊んだ人だけ参加可能にすべきか
    - プレイ時間かコイン枚数か
    - さらにベテランになると、表現が強化されるとか
      - それでもフリーテキストは不可
- 成長要素
  - 実績と似ているが、そのうちデュエルに影響があるもの
    - ルールに成長要素を有効にするかどうかの設定
      - コインごとの有効無効
- ストーリー
  - さすがに自分では書けない。発注になる。つまり儲けが必要。
- オプション
  - 左手操作モード
- 別モードゲーム
  - 一本道のマスを直接攻撃コインと防御コインを持って進む。配置された設置コインや直接攻撃をする敵を倒しながら、進めたマス数を競う
  - ランダムで配られるコインから一定数抜いてデュエル
    - デッキルールは専用のもののみ適用
    - 最低n枚サイズ1が入る、など
    - 使ったコインは所持コインにならない
    - 報酬は調整
- コインにレア度はつけないつもりだが、扱いやすさの指針はあって良さそうなのでつける
  - 案：シンプル、バランス、テクニカル
- デッキ編集
  - 検索で使用条件があるものの表示
    - 使用条件を無くす方向性

## 自動操作の高度化

- 設置後に自身の効果でダメージが上昇する場合があり、その場合に配置が優先されない
  - またその逆で、設置済みのコインが入れ替えで捨てられる事でダメージが下がる場合
  - AlianMachine を置いた後に AlianDragon を置く
    - AlianDragon が100だけ大きく、かつ効果も異次元×100アップなので
  - ポイズンフラワーを置いた後に、プランターを置く
    - ポイズンフラワーの設置分のダメージを加算しているため
      - 頑張ればできるだろうが、不具合を考慮して見送り
  - UndeadLeaderは、基礎ダメージがゼロだが後から増える場合がある。設置されていないエリアに対しては置くべきだが、自動操作ではゼロダメージ同士の比較になるため置いてくれない
- 初期位置からダイス目1で一歩進み、次のターンにもう一度ダイス目1の場合はSafeに戻る。
  - これは敵設置がある場合に、ロジック上次のダイスで安全なマスの数が多いほうに行くためだが、設置コインを持っているなら内側に行って欲しい
    - よりダメージを与えるように動くか、それともより安全に動くか。
      - という二種類の思考を作り、NPCではランダム選択するとか
- 自動操作で左右に行ける時、中央に近いエリアには自分のコインが設置済みで、遠いエリアは未設置の場合、設置コインを持っているなら未設置の方に行く
- サポートコイン選択において、より効果が高いものを使用させたい
  - 行動評価方法の確立。複数手の評価
- ProcessAutoSelectAdjunct で、より効果の高いコインの選択
- CPU性格による優先変更
  - 貧乏性ならサイズの大きいコインの使用をためらうなど
- デッキ内容による優先変更
- SelectAdjunctCoinAreaSideで、相手へのダメージが高くなるように変更するか、それとも自身のダメージを減らすように変更するか
  - CPU性格及びデッキによる。遅いデッキなら後者
- 最も有効な手の選択
  - サポートコイン
  - 場の評価
- AdjunctProgressTurnToSetCoinArea 使用の際に、有効な相手が、現状 TrapGrowDamage,TrapTurnEvolution,TrapBlast だけ。
  - TrapGrowDamage については、ダメージがマイナス設定だとむしろ使っては行けない
- ターン毎にダメージが減る設置コインに対して、ターン追加をするサポートコインを使わない。
- 移動先選択時に、中央に近い方へ移動しているが、近い方には既に罠を配置していて、遠い方は配置していないなら遠い方に行く。
  - ただし自分が配置可能なコインを持っている場合
- エリアタイプ変更サポートコインについて、まだ設置していない場所に対して行うようにする。
- デュエルルールのmanyActionの対応
  - 複数ドロー。1ドロー後に、手持ちコインではターンリソースを使い切れないなら再度引く。
  - ターン全体としてターンリソースを使い切るようにコインを選択
- コスト対応
  - ドロー後に手持ちの中で最も有効なコインを決めて、その分のリソースを残す
- ステータス解除のサポートコインについて、ステータスがある程度溜まってから使用
- ガチルールの時、リソース上限いっぱいまで使い切る
- 手持ちコインの使用条件になっている設置コインの上に止まったときは、何もしないようにする
- AutoPlayerInputer.Select
  - コイン効果により、山コインまたは捨てコインからから取得して設置コインに重ねる場合に選択されるコインのロジック。
    - 現状はサイズの大きいものから使用している
- 自身のオートプレイ時の思考ルーチン設定
  - デッキに対してセット
  - 常にオートプレイの設定。対戦前に選択させるのも一つの手
    - さらに自動マッチングがあると、マッチングする限りはどんどん対戦される
      - オートプレイ同士をマッチングするかどうか

## コインアイデア

- 状態異常メインのデッキが弱い
  - 呪いは十分強い。炎上と毒は何とか勝てる。帯電は独自色がある
  - それ以外について
    - 荷重：移動不可
    - 麻痺：ドロー不可
    - 混乱：移動先ランダム
    - 感染：コイン全て捨てる
  - 相手の状態異常カウントに応じたダメージコインをとりあえず作るとか
    - 差別化はしたい
  - 状態異常の種類数でダメージが変わるコイン
    - 5つ以上なら即死とか
    - 防御強化も数えるので対策になる
- チーム戦の場合に、直接攻撃を受けたプレイヤーと同じチームのプレイヤーにもダメージ、というのは面白そう
- 環境コインを一定ターンの間だけ与える。ダイス＋１など
- 一時的にリソース増加
- ルールに対応する設置コインを作る
  - 未使用リソースを次のターンに引き継ぐ。
  - 移動ダイス目分リソースを回復
  - 移動を除く各ステップで複数回実行可能かどうか。
- Safeエリアがセーフにならないようになる環境コイン
- 次元ビーコンのように、それ自体は効果がないが他のコインに参照されるものに説明を付ける
  - 説明のみの効果を追加
    - Body が NotUse なので、他と共有
- Heresy〇〇は、HeresyIdolが設置されているときに使用できるが、使用制限は外して、HeresyIdolに隣接しているときに超強化されるようにする
  - 合わせてHeresyIdolの配置制限を1にする
- 相手がドロー以外でコインを得た時に能力アップ
- 指定されたコイン名のコインを捨てると使用できる。
  - タグやコイン種類だと選択があるので却下
- コインを使用した時、捨てコインから指定のコインがあれば取得する
  - タグやコイン種類だと選択があるので却下
- 指定された設置コインが踏まれたとき、このコインが手持ちにあるなら、同じエリアに配置する
- この設置コインが踏まれたとき、手持ちに指定されたコインがあるなら、同じエリアに配置する
- 捨てコインとなっている指定コイン種類/コイン名/タグ数分ダメージアップ
  - タグを見るものは作成済み
- 手持ちのコインを〇枚追放すると使用できる
  - 追放を見る効果は新調に
- コインが追放されるたび、ダメージアップ
  - 追放を見る効果は新調に
- 使用すると相手がコイン〇枚をドロー
  - 山コイン破壊が目的？
- 設置時、このコイン以外の設置コインをすべて捨てコインにする。その枚数分、ダメージアップ
  - 隣接エリアなら既にある
- 使用後、〇ターンの間、あなたは設置/直接攻撃/防御コインを使用できない
- このコインが設置されている間、あなたの〇コインのリソースが-1
  - 全部マイナスは既にある
- あなたは〇ターンの間ダメージを受けない。〇ターン後、あなたは敗北する
- 〇コインを取得するサポートコイン
- 手持ちのコインをすべて捨てる。あなたの設置コインは捨てた枚数×50ダメージアップ
- この直接攻撃コインに対して相手が防御コインを使用したとき、その防御コインは捨てコインとならずに手持ちに残る
  - 直接攻撃コイン側のリスク追加
- 前のターンで受けたダメージの半分、ダメージアップ
- 他の設置コインがある場合のみ設置できる
- 他の全ての設置コインがタグ〇〇を持つ場合のみ設置できる
- このコインは捨てコインになる時、代わりに追放する
- 設置コインをすべて捨てコインにする。その枚数ドローする
- 〇ターンの間、リソース上限+〇
- このコインのダメージは現在のHP÷2
- このコイン以外のコインが手持ちコインに無い時、2枚ドローする
- 裏向き配置されている枚数×100ダメージアップ
- 設置されているドラゴンを捨てコインにする。
  - 設置コイン破壊は禁止だが、指定のみなら相手デッキに含まれないリスクがあるので許容できるかも
- 捨てコインである〇を山コインにすると使用できる
  - 条件として捨てコインにあるかどうかを見る効果は、一度成立すると使い放題になるので
- 2枚ドローする。ターン終了時に手持ちコイン全てを捨てコインにする
  - リスクのあるドロー
- 山コインから〇枚捨てコインにする事で使用できる
- この設置コインのダメージは、2ターン後に与えられる
- このコインを使用する際のリソース消費は2倍
  - 倍だと現在値なのか基本値なのかがあるので、加算も検討
- 相手の設置コインが自分の設置コインより多い場合に使用できる
- 設置コインのサイズ合計×〇ダメージアップ
- 裏向き状態で相手に踏まれたときにダメージアップ
- 手持ちコインに〇コインがある場合、このコインと合体して〇コイン（デュエル中のみ）になる
  - 合体したコインも合体の効果を持っており、どんどん違うコインになる
    - シャドー〇〇はターン毎に単独で変化するが、任意の組み合わせがあると即座に行われる点が違う
- このターン、ダメージが100アップ
  - リソース消費のルールでないと、直接攻撃に乗せられない
- 設置コインに〇カウンターが〇個ある場合に使用できる
- ターン終了ごとに〇カウンターを追加
- 設置時、タグ〇を持たないあなたの設置コインをすべて捨てコインにする
- 隣の全てのエリアに自身の設置コインがある時に配置できる
- 設置コインの枚数×〇ダメージ
- 設置以外の方法で配置されたコインがあるたびにダメージアップ
- 設置した〇コインの数だけ直接攻撃
  - 強すぎるかも
- 相手がサポートコインを使用したとき、手持ちコインのこのコインを捨てコインにすることで効果を無効にする
  - サポートコイン対策が現状無い
- 相手が防御コインを使い、その防御効果を上回った時、与えるダメージは二倍になる
- サポートコイン。設置されている全ての〇コインを〇コインに変更する
- 自分と相手の山コインの枚数差×〇ダメージアップまたはダウン
- サポートコイン。手持ちコイン内の設置コインを現在のエリアに配置条件を無視して配置する
- 直接攻撃コイン。ダメージを与えた場合、手持ちコインに残る
- 直接攻撃コイン。自身の配置コインがあるエリアにいるときに使用できる。
- 直接攻撃コイン。使用後、現在のエリアにある自身の配置コインを捨てコインにする。
  - タグを見るものなら既にある
- あなたの設置コインが一枚もない場合、このコインを使用する際のリソース消費は0になる。
- 設置コイン。エリア〇にいるプレイヤーは直接攻撃コイン/防御コインを使用できない
- サポートコイン。相手の手持ちコインを確認する
- 設置コイン。配置時に山コインから〇枚を捨てコインにする
- サポートコイン。このターンのみ、選択した設置攻撃コインのダメージを0にする
- サポートコイン。設置攻撃コインではない設置コインをすべて捨てコインにする
- サポートコイン。ダメージが減少している設置コインをすべて捨てコインにする
- 自分のライフが相手より多い/少ない場合に使用できる
- 設置時にカウンターを〇個乗せる。このコインが捨てコインとなる時、代わりにカウンターを減らす。
- 設置コイン。ターン終了ごとに、手持ちコインが0枚ならカウンターを一つ乗せる。5つカウンターが乗った時、あなたは勝利する。
- 設置コイン。ターン終了ごとに、帯電1を得る
- 自身の〇状態異常1毎に〇ダメージアップ
- 相手に踏まれた場合、相手を移動前のエリアに移動する
- ○があるかぎり、このコインは捨てコインにならない
- 相手が設置するたび、ダメージアップ
- このコインがダメージを与えた時、あなたはその半分のダメージを受ける
- このコインが捨てコインになる時、あなたの設置攻撃コインの内ダメージが上昇しているものを捨てコインにする
- 設置攻撃コインを捨てコインにする。その後、そのコインのダメージの半分を受ける
  - 設置コイン破壊は禁止しているが、リスクの一つとして
- あなたの直接攻撃コインのダメージを半分にする。相手は防御コインを使用できない

### コインアイデア-優先度低

- 鬼の右足、鬼の左足が、隣のエリアでかつ左右が一致しているなら効果アップ
- 設置済みコインを破棄してコイン取得
  - 増殖コインとの組み合わせぐらいしないと遅すぎる。
- 指定されたコインを全て所持している時勝利する
  - そのコインが他の使い方ができないとまずい。設置だと似た効果がある。
- 自分の設置済みコインの位置をランダムに置き換える。配置制限は無視する。
  - 特殊勝利と合わせて使った時
- このターン、二回移動と設置が行える
  - 強力だが、後半だとむしろ移動したくない時があるので許容範囲か
- このターンの間、環境コインは無効化される
  - ややこしいだけ
- 配置後、配置済みのコインを指定する。このコインのダメージは指定したコインのダメージの半分になる。
  - 操作数が多くなるため
- このコインをコイン使用時の代償として指定した場合、これ一枚で全て支払ったことになる。
  - 破棄不要となる環境コインがあるのでわざわざ入れるかどうか。自分だけ効果という利点はある
- 指定したフィールドにある自分の設置コインを全て破棄する
  - 環境コインの効果取り消しに使える
- この設置コインを配置する際、ライフを半分失う。
  - 設置攻撃コインと直接攻撃コイン以外のダメージ源を作るかどうか
- ターンの開始時に、ターンプレイヤーは自身が配置した設置コイン数×設定値のダメージを受ける。
  - 同上
- 自身に装備する、装備コインという種類の追加
  - 他コインとの差別部分をはっきりさせる
  - 防御コインとの入れ替えも検討
    - 所持コインサイズ枠を消費しないのでよく考える
    - バフ・デバフも同じ
- 全ての設置コインに、特定のタグを付与する。
  - 対象の制限
- 対象コインを完全一致ではなく部分一致
- トークン
  - トークンの処理を削除したので、再検討
    - コインステータスを見る
    - トークン専用のコインを作る
      - コインサイズが問題。サイズ1固定だとすると、サイズ1を見る効果が影響する
        - サイズ0にしたいが、コインのサイズでモデル大きさを決めている所などで問題
    - 効果で生成されたコインであることは CoinData.SourceCoinID で分かる
    - トークン専用コインを適宜作ることにする。共通化しない
  - 設置されているトークン一つにつき〇ダメージ
  - トークンとの置き換えでのみ配置できる
  - トークンが〇枚設置されているとき
- このコインに隣接するエリアにある、相手の設置攻撃コインのダメージが減少
  - 相手の設置攻撃への影響はシーズン1では保留
- 相手が設置攻撃コインを踏んだ際に、手持ちコインに持っていたなら捨てコインにすることでダメージを上げる
  - 設置の効果でもよいし、手持ちコインの効果でもよい
    - AfterDamageで出来る
    - 使うかどうかの選択は出さずに常に使う
  - ダメージに加算するのではなく追加ダメージ。他のダメージは作らない方針なので見送り
- コインをドローする。条件を満たす場合２枚ドローする
  - 条件が多数ある。思いついた時に実装
- 追加のターンを得る
  - ロジック面倒
- 追加のステップを得る
  - ロジック面倒
- 相手のコイン使用時に、コストを追加する。コインを捨てるなど
  - 強すぎるように思うので保留
- 同じ名前を持つ設置コインがある場合、そのすべてを捨てコインにする。
  - 設置に干渉するコインはよく考える必要がある
- 相手の重ね置きされた設置コインが〇枚以上であるときに使用できる。一番上の設置コインを捨てコインにする。
  - 設置に干渉するコインはよく考える必要がある
- サポートコイン。指定した設置攻撃コインのダメージを〇下げる
  - 設置に干渉するコインはよく考える必要がある
- 相手の設置攻撃コインのうち、最も低いダメージのコインを捨てコインにする
  - 設置に干渉するコインはよく考える必要がある。自分のコインだけならOK？
- サイズ1の設置コインをすべて捨てコインにする
  - 設置に干渉するコインはよく考える必要がある。自分のコインだけならOK？
- 山コインから〇枚を捨てコインにする。その中に〇があったら相手にダメージ
  - サポートによるダメージは保留
- 使用すると、同じターン中に設置攻撃コインを踏んだなら、ダメージを受ける代わりにライフが回復する。踏まなかったら敗北する
  - 即自殺が出来る為、コイン稼ぎに使われる。
  - ライフ回復がテーマとなるコイン追加時
- 〇枚以上や〇ターン以下以外に、範囲の検討
  - 状況が思いつかない
- 相手はコインを〇枚引き、その後もっともサイズの大きいコインを全て捨てる
  - 手札破壊は保留
- 指定タグデッキの支援
  - 異次元デッキのビーコンの取得を支援するもの
    - 単に山から取得だとコインが増えただけになる。特徴的な効果が欲しい
    - 成立しづらいことも特徴なので見送り
    - 代わりになるが一定ターン後に自動で捨てられるコイン
      - コイン内部名で指定されているため、名前で指定とか、よく考える必要がある
- 設置攻撃を踏んだ直後に、そのエリアに配置すると受けたダメージの半分を上乗せなど
  - 後ろ向きなので
- 相手の山コインにごみコインを入れる。
  - 行動を妨害する効果は避けたいところだが、妥協できる範囲か
  - それより攻撃してほしいということで保留
- 自身が受けている状態異常を相手に与える
  - 使用条件が相手次第、というのは無駄なコインになりがちであり、あまり作りたくはない。
- サイコロで6を振った時に発動
  - サポートコインで固定した場合も発動する
  - ランダム性は減らしたい。移動の副産物ではあるが、効果発揮がランダムであることに違いはない
- ダイス目半分
  - ダイス目マイナス1の環境コインの意味が薄れる。
  - デュエルを長引かせるものはとりあえず見送り。なおマイナス１は許容内としている
- 相手を強制停止させる設置コイン
  - 強いので、自身のダメージはゼロで、重ね置きでダメージを増やすなどの制約
  - 処理がややこしいのと、ダイス目通りにならないのはストレスになりそう。
  - 設置を除外する方法を作ってからだが、大分先になりそう
- 持っているだけで一ターンに一回帯電1を得る
  - 複数持つと毎ターン必要分がたまりそう。1以下にもできない。消耗型は既にある
- ダメージを受けた時にカウンターが乗る
  - タグ切断だと出血、打撃だと骨折など
  - カウンターを消費する必要があるコイン
  - 独自性のある効果を思いついたら対応
    - 出血は溜まると大ダメージ
    - 骨折は移動不可
- 環境コイン
  - 使用できるコインがある場合に、必ず使用しなければならなくなる環境コインに、バリエーション追加
    - コイン種類ごとに別の環境コインにする。
      - 自分は直接攻撃コインを持たないなど、相手のみに影響を出せるので却下
- サポートコインで、コインサイズ２を消費して、次のターンのリソースを２増やす。
  - ルール次第で無意味になるコインは減らしたい
- ジャンプ
  - 近くの空き地
  - 相手の場所
  - 任意の場所
  - デュエルの遅延につながる
- 自身を一回休みにする効果コイン
  - 終盤で移動先が無い時
- 設置コインを移動するサポートコイン
  - 設置コイン入れ替えのサポートコインでまかなえる
- サポートコインで、指定した設置済みコインのトークンを隣に作成
  - 強すぎるような気がする。配置制限がきついやつとか
  - コイン指定後複製先を選ぶ必要があり、これだけのためにステップ増やすのはいや
    - ランダムとかより内側のエリアなどのルール
- 墓地に置かれてからのターン数が一定以上になるとなにか起きるコイン
  - 自動でストックに戻る。または手札に戻る。
    - 破壊した意味が薄れる。
  - 設置コインなら、勝手に墓地から出て来て配置される
    - 一杯になっていたらどうするか
    - 強すぎるように思う。または相当小さいダメージを設定することになって使われないのでは
- 複合コイン
  - 実装自体はほぼ出来ているがコインがないので未テスト
  - Ver2で再検討
- 効果反転
  - 一部効果のみ反転は難しい。全部の反転バージョンも面倒
  - 一つのコインに同じ効果を複数もたせられない点を解消したら検討
- ライフが一定以上だと勝利するコイン
  - ライフ回復手段がないし、作るのはだいぶ先になりそうなので
  - ルールの初期値を多くする事で即デュエル終了になると稼ぎに使われる
    - 初期値の二倍とか
- 特定の種類のコインを取得するサポートコイン
  - 特定のコインについてはあるかないかなので問題ない。
  - 山コインから選択する操作に時間がかかるのでデュエルの遅延を招く
  - 対象に一致するコインのうちからランダムならまだましだが、ランダム性は排除の方向
  - Ver2で再検討
- 特定のタグを持つコインを取得するサポートコイン
  - 名前固定の取得コインと同じ。そのタグを持つコインを一種類だけにすると同じことができてしまう
  - 山コインから探す操作に時間がかかる
- 任意の場所に任意の設置コインを配置するサポートコイン
  - 実質サポートコインコスト分を犠牲に好きな位置に配置できる効果
  - コストを無視できるので一部コインが強すぎる
    - 効果では配置できない、みたいにコイン自身の制限を与える案もあるが、全部に書くことになる
  - ダイスを振る意味が減るので後のバージョンで
  - 任意場所はダメだが、重ね置きだけ出来るとか。
    - 〇枚重ねたら勝利、のコインを削除して、どんどん重ねられるようにする方向性もある
      - 始めに置く必要があるため、このままでも行けるかも。このサポートコインは3枚しか入らないので4枚で止まる
    - ダメージが高すぎる。重ね置きに対するダメージ減少ルールが欲しい
      - 2枚で20%。5枚で50%減少とか
- 山コインのターンを進めるかどうか。
  - 山コインは効果が発生しない物であるはず
  - 時間で飛び出てくるコインもおもしろそう
    - 飛び出してどこに入るのか。設置が空き地に入るのだとかなり強力
      - 重ねられないコインにして、すでにある設置を削除してしまう。
        - 一方敵コインマスだと除去になるのかも。
      - ランダム性は減らしたい
  - 指定のコイン効果を封印する方法として、追放や山コインに戻す、という使われ方はする
  - そういうコイン効果を作らないと始まらない
  - 現状のまま、ターンを進めることにする。そういうコインが作られたとしても、強力だったら弱体すればいい。
- 設置攻撃コインで、踏まれた時にランダムで変化したうえでダメージを決定
  - ランダムは極力排除
- ダメージを肩代わりする設置コイン
  - デュエルの速度が遅くなるだけ
- 設置コインで、自分のリソース上限を１増やす。
  - 強力すぎる。環境コインの意味がなくなるので、せめて配置制限を厳しくする
- デュエルルールを丸ごと別のデュエルルールに変更する環境コイン
  - デッキルールは無視される
  - これのためにルールを事前に保持するのが面倒。相手と自分で最大6種増える
- 設置されている間、指定されたタイプのコインが使えない、という効果
  - サポートコインを想定。それ以外は強力すぎる

## ルールアイデア

- 対応優先順位
  - デュエルが壊れるような設定に出来ないもの
  - ゲーム上既にある固定値をルール化

- 移動のダイスはターンの開始時に振って、移動自体は直接攻撃コイン/サポートコインの後
  - 移動分リソースを先に得る
  - ダイス目が悪かったらダイス目サポートコインで上書きするなど
  - 敗北確定時に遅延行為をするので保留
- デュエル1ラウンド目の先攻プレイヤー決定ルール。標準ルールだとランダムにしたいので
  - ランダムのバリエーションとしてダイス勝負
  - 初期手持ちからより大きいコインを捨てたほうが先攻
    - 決まらなかったらすべて山コインに戻して手持ちを引き直し
    - 手持ち枚数が異なっていたら引き直し
- 最終ラウンドになったらサドンデスモード
  - Safeエリアがセーフにならないなど
  - 他のルールを設定しておいて、サドンデスになったらルール丸ごと入れ替え
- コインを使用するたびに1ドローが自動的に行われる。
  - 代わりにターン初めのドローがない
  - 決着までが短くなる。
  - リソース管理に集中できる
  - 追加コストはドローされない
    - リスクにならなくなるので
    - 一方でその後枚数が少ないまま戦わなければならない
      - 終了時に最大までドローのルールを使うかどうか
- 状態異常発動のカウントを、状態異常別に分ける
- 指定のコインがラウンド開始時に配置されている
  - どちらの物でもないので、両者共ダメージを受ける
- 直接攻撃コインを同エリアで使用する場合、防御コインは使用できない
  - 格闘ゲームで言う投げ技のイメージ
  - 射程接触の価値を上げる
- 防御コイン仕様変更
  - （従来）直接攻撃コインに対して使用。一回使い捨て
  - 直接攻撃コインのタイミングで使用。次にコインを使用するまで、すべての直接攻撃コインに対して効果発揮
  - 直接攻撃コインのタイミングで使用。〇ターンの間、すべての直接攻撃コインに対して効果発揮
  - 実質サポートコイン化
  - 専用スロットにセット
    - つまり手持ちコイン枠外に持てる
      - 引くたびにセットしていけば直接攻撃を受けなくなるのでは
        - タイミングが直接攻撃と同じなので、攻撃機会を捨てている
        - デュエルの遅延につながるとも言えるが、設置攻撃メインなら仕方がないか
          - 設置攻撃メインの場合のデュエル加速方法を考える
        - 一枚のみにすれば、連続攻撃で通せる
    - 直接攻撃時はセットされたものから使用
    - セット時にリソースを消費する
    - 使用コイン選択
      - セットした順番で自動的に使用
      - 選択する
      - 攻撃側が選択する
    - セットした防御コインの内容が見えるかどうか
    - スロットの上限枚数、上限サイズ
      - 任意コインと入れ替え、または古いコインから捨てられる
    - 防御コインではないコインもダミーとしてセット可能にするかどうか
      - 裏向きでセット
- 種類別の枚数制限。直接攻撃が〇枚までなど
- 設置コインを置き換えた時に、元あったコインを手持ちに戻す
- 移動時に、サイコロを振らず任意の移動量を選択できる。同じ数は以降選べない。１～６を一度ずつ選ぶと再度すべて選べるようになる
- 移動方向を固定。端で折り返す。混乱ステータスは引き続きランダム
- 移動方向のマスが移動量より少ないとき
  - その方向には移動できない
  - 端で止まる
  - 端まで行って残りを折り返し
  - 端まで行って反対側から再開。端の概念がなくなりループになる
- 設置可能場所
  - 現在位置
  - 通ったマス
  - すべてのマス
- ラウンド変更時
  - ターン数及びライフは必ずリセット
  - 設置をリセット
    - 経過ターンはリセット/維持
  - 手持ちをリセット
    - リセットする場合だけ引き直し
    - 経過ターンはリセット/維持
  - 現在位置と移動方向をリセット
- 防御コインを一度に複数枚使用できるようにする
  - 複数枚持つことがまれ
  - 操作ステップが増えるが、直接攻撃コインのダメージがゼロになったら自動終了なのでそこまでではない
  - 防御優位にしたいので対応
- 指定タグを持つコイン使用不可
  - 個別にコイン使用不可にするのが面倒な場合
  - イベントで使えそう
  - 公式試合でPRコインを使わせないためとか
- デュエル終了間際になるとダメージ増加
  - 一部の格闘ゲームにある、ライフが少なくなったプレイヤーが攻撃力増加
- デュエルシーンをルールで指定
- 山コインをシャッフルせずに順番を固定
  - 並べ替えUIを作る
  - 追加コインも
- 1ステップごとにプレイヤー交代
  - P1ドロー、P2ドロー、P1サポート直接、P2サポート直接・・・という流れ
    - 荷重の効果処理に注意
- Safe エリアで出来ない事のカスタマイズ
  - 逆に言えば、Safe で出来る事のリストがあり、デフォルトが全部ＯＦＦ
    - さらに進めて A～E それぞれで設定
  - 設置コインが置ける
  - 直接攻撃コインで攻撃出来る
  - 直接攻撃コインで攻撃される

### ルールアイデア-優先度低思いついたものの微妙なもの

- 各ステップの順番の任意定義
  - ドロー、サポートのみ、直接攻撃のみ、移動、設置のみ、サポートまたは直接攻撃、サポートまたは設置、直接攻撃または設置
  - むしろ全ルールで定義してこれを使うように変えてしまう
- コイン内容変更
  - このルール化でのみ、指定されたコインの射程/コインサイズなどが変更される。
    - ダメージ量/防御量は実装済み
    - ルールでエリアを縮小した場合に、長射程コインが使用できなくなるのを防ぐためにも使う
  - コイン内容補正をする前に、プレリリースとしても使える。
    - 効果に変更があるときもあるが、それは流石にできない
    - 補正後に、以前の補正内容として残すのにも使える
  - 複合コインに対しての補正をどう設定するか
- コイン制限のバリエーション
  - 指定コイン郡の枚数合計指定
    - 利用率の高いコインは能力を下げるようにするため、これが必要になるのはコイン種類が膨大になった時ぐらい
  - 指定タグ枚数合計指定
    - タグをシリアライズしたくない
- 手持ちコイン使用に必要なリソースが、手持ちに入ってからのターン分だけ軽減する
  - 関連して３を超えるリソースが必要なコインがあっても良い。その場合は効果として実装
  - 直接攻撃を貯めておいて連射が出来るようになる。
    - まとめて発射する効果を持つコインの意味が薄れる
- 設置時にリバーシのように相手の設置コインの所有権を奪える
  - 端のエリアの価値が上がる
  - 高コストでおいたコインの所有をあっさり奪われる
    - 所有権が変わらない、という効果
      - サポートコインの移動を拒否できるなど、無効関連をコイン情報としてまとめる。Bodyに持つ？
- ドロー関連
  - サイズ指定でドローできる
  - 好きなコインをドローできる
    - ダイスのみをランダム要素にする
  - 操作ステップが多くなる。探している間待つのが長い
- リソースを消費してダイス目を補正
  - １消費で出た目を－１など
  - ダイスを振る前に指定するか後か
  - HPが少なくなった時に乱発する事になるのが微妙
  - 操作手数が増える
  - ダイス目固定サポートコインの立場が薄れる
- 手持ちオーバーでコインを捨てた場合、同数のリソースが次ターンに増加
  - ターン持越しルールONが必要
  - そういうサポートコインも検討
- ステータスが規定値に達した時に効果を発揮するかどうか
  - 種類ごとに設定
  - カウンタ自体は蓄積する。溜まった場合の効果が発動するかどうか
- ステータスのターン毎の減衰量
  - 種類ごとに設定
  - 半分
  - 0~
  - 炎上と毒の差がなくなる。採用するならどちらかを無くしてダメージは一種類だけにする。
- ターン数蓄積の有効化/無効化
  - 山/手持ち/設置/捨て
  - ターンが必要なコインの意味がなくなる。設定と同時にコイン使用不可も設定されるようにしたい

## デュエル

- 移動先が複数あり、どちらに移動しても敗北でデュエル終了となる場合に切断される可能性があるが、持ち時間の間待たなければならない
  - 相手の切断検出を考える
  - ダイス目のランダム表示値は飾りであり振る前に結果は出ているので、結果を確定してしまう。勝つ側は移動先をさっさと選んで終了処理へ進む
  - 出来るといいけど複雑になるので保留
- 荷重などの制限を与える状態異常が10カウント超えた場合に、表示なしでステップが飛ばされる。動作出来ない事をUIで表示
  - 対戦の場合に待機が入る。テンポが悪くなる
- 不正プレイヤー対策
  - ストックコインとか手持ちコインを見えるようにする不正
    - コイン種類を渡さず、明らかでないコインはIDのみで管理
      - 明らかになる際に差し替えられる場合がある
- 上部の手持ちコインやリソースの変動にアニメーション
  - コインが無くなる時はフェードアウト。終わったら間を詰める。現状アイテムの使いまわしをしているが、やめて追加されたら末尾に追加
    - 一時的に幅を超えてしまう。間を詰めるのも同時
  - とりあえずリソースはライフ同様に出来る
  - 選択しているコインを使うと残りリソースはどれだけになるかの表示
  - ライフ減少のアニメーションに注目してほしいので保留
- デュエルで発射型のオブジェクトが盾と衝突する際、弾など小さいものだと盾に当たる前に消える
  - 許容内としておく
- オンラインのデュエルで、デュエル終了だけをクライアントから投げられた場合に報酬を拒否できるかどうか
  - 前回の報酬から10分以内なら報酬なしにしている。
    - 一回は仕方がないとして抑制は出来ている
  - ログの整合性チェック。相手と自分でログが二つあるはず
    - 後で分析
- アニメーション省略設定
  - デュエル時間の短縮につながり、高速に回せるとゲーム寿命に関わる
    - ある程度遊んだ人用
- リザルト表示で、何のコインでどれだけダメージを受けたとかの表示
- あるゲームを参考にした見た目改良案
  - 値の変化がある項目を強調。ただし一瞬だけで強すぎないように注意
    - ターン
    - リソース
    - 上部、手持ち、山、捨て
    - ステップ
    - 環境
  - 各ボタンのうち、デュエルのメインとなるものは形状を変える。色は変えない
- 状態異常、エリアステータス、コインステータスの統合を検討
  - エリアステータスに状態異常は対応
  - コインに対するタグ追加もエリアに対するタグ追加。タグが付いたエリアに対する効果追加がセット
  - エリアタイプ変更はプレイヤーやコインについたらどうなるか
    - 統合はするが、項目ごとに対象を限定できるようにする。
      - だったら今のクラスのままでベースクラスなりインターフェイスで統合でいいのかも
        - データはデュエル中に相手との交換デシリアライズされる。統一されたデータは作れなそうだった
  - するなら似ている別クラスで追加
- ターン毎の残り時間とは別の総残り時間を表示
  - デバッグ版では表示
- デュエル中に音量調整したい
- デュエル後の再戦選択
  - デュエル画面のまま勝敗結果表示をして、合わせて選択
  - オンライン時は再戦可能回数は1とするなど
- デュエルステージ 雪国
- 手持ちコインをプレイヤーの周りを回らせる
- コイン選択時に、選択→OKの2ステップではなく、コインの上フリックでも可にする
- サレンダー・降参の追加
  - 無報酬となるように
  - 数を記録
  - 降参した側は即デュエル終了。相手はオートで続ける。
  - 格闘ゲームのように短時間で決着がつくスタイルにするため、優先度は低い
- コイン設置時の表現
  - コインに依存した表現。地中から出てくるとか半透明から実体化など
- 効果発揮時に何が起こったか分かるようにテキストで表示
  - ログの一部を画面下部に流す
  - 一覧表示して履歴をたどれるように
- 状態異常はキャラクターに常時アニメーションがついてほしい
  - または、キャラクター近くに表示。その場合は文字だと一杯になるので、状態異常毎にアイコンを付ける
  - 文字は出すようにした
- CoinStatus がクリアされるタイミングが不明
  - 手持ちコインの間に強化された設置攻撃コインが設置される際に維持する為
  - ラウンド内は捨てられようがストックに戻ろうが維持される事とする
- おもちゃシリーズについて、一定ターン経過で使用できるようになるが、おもちゃと結びつかない
  - 「ゼンマイ」と名前に入れて、巻く時間とか
- 未使用のステータス
  - CoinStatusAppendTag
  - CoinStatusAppendValueByTurn
  - CoinStatusTurnToTrash
  - PlayerConditionDetailSkipAdjunct
  - PlayerConditionDetailSkipDirectAttack
  - PlayerConditionDetailSkipGuard
  - PlayerConditionDetailSkipSet
- 直接攻撃コインのアニメーションをパーティクルで作ったほうがいいものは入れ替え
  - ダメージ属性によるエフェクトと統合したほうがいいのかも
  - 候補
    - DirectAttackAnimationNearFrame
      - 火炎放射器
    - DirectAttackAnimationNearFallen
      - 油壷
    - DirectAttackAnimationFarThrowsRandom
      - 貧者の石ころ
    - DirectAttackAnimationFarThrowsContinue
      - 群衆のイシツブテ
    - DirectAttackAnimationFarSlash
      - DimensionSlash
    - DirectAttackAnimationFarPushUps
      - PlantParty
- Resourceを消費する行動をする際には、消費量がリソース表示の場所で分かるようにする
  - コインを使用する際、選択した時点でリソース表示の〇に枠を付けるなど
- 敵コインを踏んだ時、敵の環境コインを維持するかどうか選択できるようにするかどうか。

## キャラクター機能

- 外見のみ変更
  - コインモデルをそのまま使用
  - 特別なモデルは販売。オンライン対戦以外での収益の柱とするかも
- アニメーション
  - 勝利
  - 敗北
  - 引き分け
  - ダメージ
  - ドロー
- メリットとデメリット
  - 基本的にそれらだけ比較するとデメリットの方が重くする。この事で特徴なしの選択も意味あるものにする
  - 候補
    - 直接攻撃コインアップ、設置コインダウン
    - 全ダメージアップ、防御コインを使用できない
    - 歩数が1減る、リソース減少
    - ステータスダメージ無効、ステータスによる動作阻害効果発生までの数が減少
    - タグ〇の効果を上昇、タグ〇を持つコインしかデッキに入れられない
- コイン選択ルーチンの調整
  - コイン入れ替えサポートコインについて、自分のダメージを上げるのか相手のダメージを下げるのか

## 複数人対戦・チーム戦

- 順番の決定方法
  - チームAとBがそれぞれ二人ずついるとしたらABABが公平だと思われるが、Aの二人は始めのAか後のAのどちらになるか
- ホストが一人の待ち受けしかしていない
- TODO処理
  - DuelAreaController
    - GetPlayerPosition
      - 同じマスにより多くのプレイヤーが止まった時
- ClearPlayerCondition は bCoinOwner がfalseなら、プレイヤーの選択が必要になる
  - プレイヤーを対象に取るサポートコインの選択ステップが必要
    - とりあえず自分に固定。将来検討
  - ProgressTurnALLSetCoinsByPlayer は自分以外全て。ClearPlayerCondition も同じ解釈にはできるが、影響が大きい
    - ProgressTurnHandCoinsByPlayer
    - RemoveCoinStatusALLSetCoinsByPlayer
- 直接攻撃コインの相手は対戦相手としているが、複数人の対戦を考えて選択を考慮する。選択肢が一つしかない場合に現状通り相手になる
  - サポートコインも同じ
- 2ラインでそれぞれ戦って、任意のタイミングで仲間と入れ替えられる
  - 代償を付けたい
